<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Work Grid</title>

    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/iconoir@latest/css/iconoir.css"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css"
    />

    <link rel="stylesheet" href="style.css" />
    <link rel="stylesheet" href="work.css" />
    <link rel="stylesheet" href="./about-us.css" />
  </head>
  <body>
    <nav>
      <section class="logo">
        <img src="./assests/photo.jpg" alt="Company Logo" />
      </section>

      <section class="nav-links">
        <a href="./index.html"><li>Home</li></a>
        <a href="./about-us.html"><li>About</li></a>
        <a href="work.html"><li>Works</li></a>
        <a href="Certificates.html"><li>Certificates</li></a>
        <a href="Contactus.html"><li>Contact</li></a>
      </section>

      <section class="talk-btn">
        <a href="chatbot.html">CHATBOT</a>
      </section>

      <div class="hamburger">
        <i class="fas fa-bars"></i>
      </div>
    </nav>

    <main class="work_main_container">
      <div class="work_right">
        <div class="Self_summary">
          <img src="./assests/image.png" alt="" />
          <h1>ALL PROJECT</h1>
          <img src="./assests/image.png" alt="" />
        </div>
        <div class="work_collection"></div>
      </div>

      <div class="work_left"></div>
    </main>

    <div class="project-modal" id="projectModal">
      <div class="modal-content">
        <span class="close-modal">&times;</span>
        <div class="modal-header">
          <img id="modalProjectImage" src="" alt="Project Image" />
          <h2 id="modalProjectTitle"></h2>
        </div>
        <div class="modal-body">
          <p id="modalProjectDescription"></p>
          <div class="tech-stack">
            <h3>Technologies Used:</h3>
            <ul id="modalProjectTechnologies"></ul>
          </div>
          <div class="project-meta">
            <p>Date: <span id="modalProjectDate"></span></p>
            <a id="modalProjectLink" href="#" target="_blank">View Project</a>
          </div>
        </div>
      </div>
    </div>

    <script>
      document.addEventListener("DOMContentLoaded", function () {
        const workRight = document.querySelector(".work_right .work_collection");
        const workLeft = document.querySelector(".work_left");
        const modal = document.getElementById("projectModal");
        const closeModal = document.querySelector(".close-modal");

        // Fetch projects from JSON file
        fetch("projects.json")
          .then((res) => res.json())
          .then((data) => {
            const projects = data.projects;

            // Split projects for two columns
            const half = Math.ceil(projects.length / 2);
            const rightProjects = projects.slice(0, half+2);
            const leftProjects = projects.slice(half+2);

            // Render each side
            workRight.innerHTML = createProjectCards(rightProjects);
            workLeft.innerHTML = createProjectCards(leftProjects);

            // Add event listeners for modal opening
            const arrows = document.querySelectorAll(".work_arrow");
            arrows.forEach((arrow, index) => {
              arrow.addEventListener("click", () => openModal(projects[index]));
            });
          })
          .catch((error) => console.error("Error loading projects:", error));

        // Function to create cards
        function createProjectCards(projects) {
          return projects
            .map(
              (p) => `
              <div class="word_card">
                <div class="work_image">
                  <img src="${p.image}" alt="${p.title}">
                </div>
                <div class="work_details">
                  <div class="work_title">${p.title}</div>
                  <div class="work_arrow">
                    <img src="https://wpriverthemes.com/gridx/wp-content/themes/gridx/assets/images/icon.svg" alt="Star">
                  </div>
                </div>
              </div>
            `
            )
            .join("");
        }

        // Open modal with project details
        function openModal(project) {
          document.getElementById("modalProjectImage").src = project.image;
          document.getElementById("modalProjectTitle").textContent =
            project.title;
          document.getElementById("modalProjectDescription").textContent =
            project.description;
          document.getElementById("modalProjectDate").textContent =
            project.date;
          document.getElementById("modalProjectLink").href = project.link;

          const techList = document.getElementById("modalProjectTechnologies");
          techList.innerHTML = "";
          project.technologies.forEach((tech) => {
            const li = document.createElement("li");
            li.textContent = tech;
            techList.appendChild(li);
          });

          modal.style.display = "block";
        }

        // Close modal
        closeModal.addEventListener("click", () => (modal.style.display = "none"));
        window.addEventListener("click", (e) => {
          if (e.target === modal) modal.style.display = "none";
        });
      });
    </script>

    <script src="./script.js"></script>
  </body>
</html>
